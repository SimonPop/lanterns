
const data = {"directed": true, "multigraph": false, "graph": {}, "nodes": [{"random_walk_pe": [0.0, 0.32, 0.1, 0.2, 0.13, 0.16, 0.13, 0.14, 0.12, 0.13], "laplacian_eigenvector_pe": [-0.3, -0.14, -0.06, 0.07, -0.25, 0.21, 0.03, 0.06, 0.08, 0.33], "id": 0}, {"random_walk_pe": [0.0, 0.26, 0.06, 0.13, 0.07, 0.09, 0.07, 0.07, 0.06, 0.07], "laplacian_eigenvector_pe": [-0.11, -0.35, -0.01, 0.08, -0.2, -0.39, 0.02, 0.01, -0.14, -0.25], "id": 1}, {"random_walk_pe": [0.0, 0.22, 0.04, 0.11, 0.06, 0.08, 0.06, 0.07, 0.06, 0.07], "laplacian_eigenvector_pe": [0.01, -0.21, -0.05, -0.17, 0.42, -0.02, 0.26, -0.15, 0.03, 0.03], "id": 2}, {"random_walk_pe": [0.0, 0.2, 0.06, 0.09, 0.06, 0.06, 0.05, 0.05, 0.05, 0.05], "laplacian_eigenvector_pe": [-0.12, -0.31, -0.06, 0.08, 0.28, 0.2, -0.36, 0.02, 0.02, -0.15], "id": 3}, {"random_walk_pe": [0.0, 0.22, 0.02, 0.1, 0.04, 0.07, 0.04, 0.05, 0.04, 0.04], "laplacian_eigenvector_pe": [-0.27, 0.19, 0.02, 0.02, -0.14, 0.33, 0.24, -0.23, -0.1, -0.27], "id": 4}, {"random_walk_pe": [0.0, 0.29, 0.08, 0.15, 0.08, 0.1, 0.07, 0.07, 0.06, 0.06], "laplacian_eigenvector_pe": [-0.35, 0.32, 0.05, -0.03, 0.12, -0.15, -0.08, 0.05, 0.01, 0.02], "id": 5}, {"random_walk_pe": [0.0, 0.29, 0.08, 0.15, 0.08, 0.1, 0.07, 0.07, 0.06, 0.06], "laplacian_eigenvector_pe": [-0.35, 0.32, 0.05, -0.03, 0.12, -0.15, -0.08, 0.05, 0.01, 0.02], "id": 6}, {"random_walk_pe": [0.0, 0.11, 0.03, 0.06, 0.04, 0.04, 0.03, 0.03, 0.03, 0.03], "laplacian_eigenvector_pe": [-0.09, -0.24, -0.05, 0.03, 0.17, -0.0, -0.1, -0.05, -0.01, -0.19], "id": 7}, {"random_walk_pe": [0.0, 0.11, 0.02, 0.05, 0.03, 0.04, 0.03, 0.03, 0.03, 0.03], "laplacian_eigenvector_pe": [0.05, -0.05, 0.13, -0.2, -0.05, -0.07, 0.09, -0.29, 0.53, 0.11], "id": 8}, {"random_walk_pe": [0.0, 0.08, 0.0, 0.03, 0.01, 0.02, 0.01, 0.02, 0.01, 0.01], "laplacian_eigenvector_pe": [0.06, -0.04, 0.04, -0.1, 0.29, -0.01, 0.33, -0.02, -0.14, 0.18], "id": 9}, {"random_walk_pe": [0.0, 0.22, 0.02, 0.1, 0.04, 0.07, 0.04, 0.05, 0.04, 0.04], "laplacian_eigenvector_pe": [-0.27, 0.19, 0.02, 0.02, -0.14, 0.33, 0.24, -0.23, -0.1, -0.27], "id": 10}, {"random_walk_pe": [0.0, 0.06, 0.0, 0.02, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01], "laplacian_eigenvector_pe": [-0.09, -0.05, -0.03, 0.05, -0.18, 0.18, 0.03, 0.07, 0.12, 0.61], "id": 11}, {"random_walk_pe": [0.0, 0.11, 0.01, 0.04, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02], "laplacian_eigenvector_pe": [-0.1, -0.16, -0.05, 0.09, 0.11, 0.33, -0.38, 0.07, 0.12, 0.11], "id": 12}, {"random_walk_pe": [0.0, 0.1, 0.03, 0.06, 0.03, 0.04, 0.03, 0.04, 0.03, 0.04], "laplacian_eigenvector_pe": [-0.05, -0.2, -0.0, 0.02, 0.17, 0.0, -0.02, 0.04, -0.13, -0.09], "id": 13}, {"random_walk_pe": [0.0, 0.07, 0.0, 0.04, 0.01, 0.03, 0.01, 0.02, 0.01, 0.02], "laplacian_eigenvector_pe": [0.11, 0.05, 0.15, -0.1, -0.06, 0.06, -0.12, 0.03, -0.15, 0.0], "id": 14}, {"random_walk_pe": [0.0, 0.07, 0.0, 0.04, 0.01, 0.03, 0.01, 0.02, 0.01, 0.02], "laplacian_eigenvector_pe": [0.11, 0.05, 0.15, -0.1, -0.06, 0.06, -0.12, 0.03, -0.15, 0.0], "id": 15}, {"random_walk_pe": [0.0, 0.25, 0.06, 0.11, 0.06, 0.06, 0.05, 0.05, 0.04, 0.04], "laplacian_eigenvector_pe": [-0.28, 0.31, 0.06, -0.06, 0.23, -0.37, -0.21, 0.16, 0.05, 0.1], "id": 16}, {"random_walk_pe": [0.0, 0.09, 0.01, 0.04, 0.01, 0.02, 0.02, 0.02, 0.02, 0.02], "laplacian_eigenvector_pe": [-0.09, -0.15, -0.02, 0.08, -0.26, -0.19, 0.04, 0.06, -0.1, 0.0], "id": 17}, {"random_walk_pe": [0.0, 0.07, 0.0, 0.04, 0.01, 0.03, 0.01, 0.02, 0.01, 0.02], "laplacian_eigenvector_pe": [0.11, 0.05, 0.15, -0.1, -0.06, 0.06, -0.12, 0.03, -0.15, 0.0], "id": 18}, {"random_walk_pe": [0.0, 0.08, 0.0, 0.04, 0.01, 0.03, 0.02, 0.02, 0.02, 0.02], "laplacian_eigenvector_pe": [-0.03, -0.11, 0.03, 0.06, -0.19, -0.15, 0.12, 0.15, -0.22, 0.1], "id": 19}, {"random_walk_pe": [0.0, 0.07, 0.0, 0.04, 0.01, 0.03, 0.01, 0.02, 0.01, 0.02], "laplacian_eigenvector_pe": [0.11, 0.05, 0.15, -0.1, -0.06, 0.06, -0.12, 0.03, -0.15, 0.0], "id": 20}, {"random_walk_pe": [0.0, 0.09, 0.01, 0.04, 0.01, 0.02, 0.02, 0.02, 0.02, 0.02], "laplacian_eigenvector_pe": [-0.09, -0.15, -0.02, 0.08, -0.26, -0.19, 0.04, 0.06, -0.1, 0.0], "id": 21}, {"random_walk_pe": [0.0, 0.07, 0.0, 0.04, 0.01, 0.03, 0.01, 0.02, 0.01, 0.02], "laplacian_eigenvector_pe": [0.11, 0.05, 0.15, -0.1, -0.06, 0.06, -0.12, 0.03, -0.15, 0.0], "id": 22}, {"random_walk_pe": [0.0, 0.2, 0.02, 0.1, 0.04, 0.07, 0.04, 0.05, 0.04, 0.04], "laplacian_eigenvector_pe": [0.2, 0.16, -0.15, 0.3, 0.03, -0.07, -0.11, -0.3, -0.08, 0.08], "id": 23}, {"random_walk_pe": [0.0, 0.25, 0.04, 0.1, 0.03, 0.05, 0.03, 0.04, 0.03, 0.03], "laplacian_eigenvector_pe": [0.14, 0.14, -0.5, -0.07, -0.06, -0.05, -0.06, -0.05, -0.04, 0.0], "id": 24}, {"random_walk_pe": [0.0, 0.23, 0.04, 0.1, 0.03, 0.05, 0.03, 0.04, 0.03, 0.03], "laplacian_eigenvector_pe": [0.15, 0.16, -0.46, 0.02, -0.12, -0.03, -0.14, -0.0, 0.07, -0.11], "id": 25}, {"random_walk_pe": [0.0, 0.15, 0.01, 0.05, 0.02, 0.03, 0.02, 0.02, 0.02, 0.02], "laplacian_eigenvector_pe": [0.13, 0.09, 0.14, 0.51, 0.09, 0.01, 0.16, 0.2, 0.2, -0.08], "id": 26}, {"random_walk_pe": [0.0, 0.17, 0.01, 0.08, 0.02, 0.05, 0.03, 0.04, 0.03, 0.03], "laplacian_eigenvector_pe": [0.13, 0.08, -0.26, 0.05, 0.17, -0.11, 0.07, -0.37, -0.26, 0.26], "id": 27}, {"random_walk_pe": [0.0, 0.11, 0.01, 0.04, 0.02, 0.03, 0.02, 0.02, 0.02, 0.02], "laplacian_eigenvector_pe": [0.08, 0.0, -0.09, -0.21, 0.15, 0.08, 0.31, 0.4, 0.14, -0.12], "id": 28}, {"random_walk_pe": [0.0, 0.21, 0.03, 0.08, 0.04, 0.05, 0.04, 0.04, 0.03, 0.04], "laplacian_eigenvector_pe": [0.18, 0.13, 0.13, 0.56, 0.07, 0.0, 0.05, 0.04, 0.19, -0.08], "id": 29}, {"random_walk_pe": [0.0, 0.11, 0.02, 0.05, 0.02, 0.03, 0.03, 0.03, 0.03, 0.03], "laplacian_eigenvector_pe": [0.07, -0.06, 0.15, -0.15, -0.16, -0.23, 0.01, -0.25, 0.43, -0.12], "id": 30}, {"random_walk_pe": [0.0, 0.2, 0.05, 0.09, 0.05, 0.06, 0.04, 0.05, 0.04, 0.05], "laplacian_eigenvector_pe": [0.13, 0.11, -0.33, -0.2, -0.13, 0.11, 0.05, 0.4, 0.19, -0.15], "id": 31}, {"random_walk_pe": [0.0, 0.31, 0.05, 0.19, 0.08, 0.14, 0.09, 0.11, 0.09, 0.1], "laplacian_eigenvector_pe": [0.25, 0.11, 0.26, -0.19, -0.13, 0.08, -0.28, -0.11, 0.02, -0.08], "id": 32}, {"random_walk_pe": [0.0, 0.34, 0.07, 0.23, 0.1, 0.18, 0.12, 0.15, 0.12, 0.14], "laplacian_eigenvector_pe": [0.27, 0.09, 0.22, -0.01, 0.04, 0.01, 0.16, 0.18, -0.19, 0.1], "id": 33}], "links": [{"source": 0, "target": 1}, {"source": 0, "target": 2}, {"source": 0, "target": 3}, {"source": 0, "target": 4}, {"source": 0, "target": 5}, {"source": 0, "target": 6}, {"source": 0, "target": 7}, {"source": 0, "target": 8}, {"source": 0, "target": 10}, {"source": 0, "target": 11}, {"source": 0, "target": 12}, {"source": 0, "target": 13}, {"source": 0, "target": 17}, {"source": 0, "target": 19}, {"source": 0, "target": 21}, {"source": 0, "target": 31}, {"source": 1, "target": 0}, {"source": 1, "target": 2}, {"source": 1, "target": 3}, {"source": 1, "target": 7}, {"source": 1, "target": 13}, {"source": 1, "target": 17}, {"source": 1, "target": 19}, {"source": 1, "target": 21}, {"source": 1, "target": 30}, {"source": 2, "target": 0}, {"source": 2, "target": 1}, {"source": 2, "target": 3}, {"source": 2, "target": 7}, {"source": 2, "target": 8}, {"source": 2, "target": 9}, {"source": 2, "target": 13}, {"source": 2, "target": 27}, {"source": 2, "target": 28}, {"source": 2, "target": 32}, {"source": 3, "target": 0}, {"source": 3, "target": 1}, {"source": 3, "target": 2}, {"source": 3, "target": 7}, {"source": 3, "target": 12}, {"source": 3, "target": 13}, {"source": 4, "target": 0}, {"source": 4, "target": 6}, {"source": 4, "target": 10}, {"source": 5, "target": 0}, {"source": 5, "target": 6}, {"source": 5, "target": 10}, {"source": 5, "target": 16}, {"source": 6, "target": 0}, {"source": 6, "target": 4}, {"source": 6, "target": 5}, {"source": 6, "target": 16}, {"source": 7, "target": 0}, {"source": 7, "target": 1}, {"source": 7, "target": 2}, {"source": 7, "target": 3}, {"source": 8, "target": 0}, {"source": 8, "target": 2}, {"source": 8, "target": 30}, {"source": 8, "target": 32}, {"source": 8, "target": 33}, {"source": 9, "target": 2}, {"source": 9, "target": 33}, {"source": 10, "target": 0}, {"source": 10, "target": 4}, {"source": 10, "target": 5}, {"source": 11, "target": 0}, {"source": 12, "target": 0}, {"source": 12, "target": 3}, {"source": 13, "target": 0}, {"source": 13, "target": 1}, {"source": 13, "target": 2}, {"source": 13, "target": 3}, {"source": 13, "target": 33}, {"source": 14, "target": 32}, {"source": 14, "target": 33}, {"source": 15, "target": 32}, {"source": 15, "target": 33}, {"source": 16, "target": 5}, {"source": 16, "target": 6}, {"source": 17, "target": 0}, {"source": 17, "target": 1}, {"source": 18, "target": 32}, {"source": 18, "target": 33}, {"source": 19, "target": 0}, {"source": 19, "target": 1}, {"source": 19, "target": 33}, {"source": 20, "target": 32}, {"source": 20, "target": 33}, {"source": 21, "target": 0}, {"source": 21, "target": 1}, {"source": 22, "target": 32}, {"source": 22, "target": 33}, {"source": 23, "target": 25}, {"source": 23, "target": 27}, {"source": 23, "target": 29}, {"source": 23, "target": 32}, {"source": 23, "target": 33}, {"source": 24, "target": 25}, {"source": 24, "target": 27}, {"source": 24, "target": 31}, {"source": 25, "target": 23}, {"source": 25, "target": 24}, {"source": 25, "target": 31}, {"source": 26, "target": 29}, {"source": 26, "target": 33}, {"source": 27, "target": 2}, {"source": 27, "target": 23}, {"source": 27, "target": 24}, {"source": 27, "target": 33}, {"source": 28, "target": 2}, {"source": 28, "target": 31}, {"source": 28, "target": 33}, {"source": 29, "target": 23}, {"source": 29, "target": 26}, {"source": 29, "target": 32}, {"source": 29, "target": 33}, {"source": 30, "target": 1}, {"source": 30, "target": 8}, {"source": 30, "target": 32}, {"source": 30, "target": 33}, {"source": 31, "target": 0}, {"source": 31, "target": 24}, {"source": 31, "target": 25}, {"source": 31, "target": 28}, {"source": 31, "target": 32}, {"source": 31, "target": 33}, {"source": 32, "target": 2}, {"source": 32, "target": 8}, {"source": 32, "target": 14}, {"source": 32, "target": 15}, {"source": 32, "target": 18}, {"source": 32, "target": 20}, {"source": 32, "target": 22}, {"source": 32, "target": 23}, {"source": 32, "target": 29}, {"source": 32, "target": 30}, {"source": 32, "target": 31}, {"source": 32, "target": 33}, {"source": 33, "target": 8}, {"source": 33, "target": 9}, {"source": 33, "target": 13}, {"source": 33, "target": 14}, {"source": 33, "target": 15}, {"source": 33, "target": 18}, {"source": 33, "target": 19}, {"source": 33, "target": 20}, {"source": 33, "target": 23}, {"source": 33, "target": 26}, {"source": 33, "target": 27}, {"source": 33, "target": 28}, {"source": 33, "target": 29}, {"source": 33, "target": 30}, {"source": 33, "target": 31}, {"source": 33, "target": 32}, {"source": 33, "target": 22}]}

var rw_colors = d3.scaleLinear().domain([0,0.1]).range(["white", "blue"])
var lp_colors = d3.scaleLinear().domain([-1,1]).range(["red", "green"])

// set the dimensions and margins of the graph
var margin = {top: 0, right: 10, bottom: 10, left: 10},
  width = 650 - margin.left - margin.right,
  height = 400 - margin.top - margin.bottom;

// append the svg object to the body of the page
var svg = d3.select("#my_dataviz")
.append("svg")
  .attr("width", width + margin.left + margin.right)
  .attr("height", height + margin.top + margin.bottom)
.append("g")
  .attr("transform",
        "translate(" + margin.left + "," + margin.top + ")");

function graph(data) {

  // Initialize the links
  var link = svg
    .selectAll("line")
    .data(data.links)
    .enter()
    .append("line")
      .style("stroke", "#aaa")

  // Initialize the nodes
  var nodes = svg
    .selectAll("circle")
    .data(data.nodes)
    .enter()
    .append("circle")
      .attr("r", 20)
      .style("fill", function(d) {return rw_colors(d.random_walk_pe[4])})

  // Let's list the force we wanna apply on the network
  var simulation = d3.forceSimulation(data.nodes) 
      .force("link", d3.forceLink()               
            .id(function(d) { return d.id; })    
            .links(data.links)            
      )
      .force("charge", d3.forceManyBody().strength(-400))   
      .force("center", d3.forceCenter(width / 2, height / 2)) 
      .on("end", ticked);

  // This function is run at each iteration of the force algorithm, updating the nodes position.
  function ticked() {
    link
        .attr("x1", function(d) { return d.source.x; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x; })
        .attr("y2", function(d) { return d.target.y; });

    nodes
         .attr("cx", function (d) { return d.x+6; })
         .attr("cy", function(d) { return d.y-6; });
  }


var global_color = "random_walk";
var global_index = 4;
  function updateChart(index) {
    if (global_color == "random_walk") {
        nodes.attr("d", function(d) {return d.random_walk_pe[index]}).style("fill", function(d) {return rw_colors(d.random_walk_pe[index])});
    } else {
        nodes.attr("d", function(d) {return d.random_walk_pe[index]}).style("fill", function(d) {return lp_colors(d.laplacian_eigenvector_pe[index])});
    }
   global_index = index
}

d3.selectAll("input").on("change", function(d){
    global_color = this.value;
    updateChart(global_index)
})


  d3.select("#mySlider").on("change", function(d){
    selectedValue = this.value
    updateChart(selectedValue)
})
}

graph(data)

